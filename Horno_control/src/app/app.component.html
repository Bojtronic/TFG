<div class="home-container">
  <!-- Tarjeta de Configuración -->
  <mat-card class="config-card">
    <mat-card-header>
      <mat-card-title>Configuración MQTT</mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <form class="config-form">
        <div class="form-grid">
          <mat-form-field appearance="outline">
            <mat-label>Host</mat-label>
            <input matInput [value]="connection.hostname"/>
          </mat-form-field>

          <mat-form-field appearance="outline">
            <mat-label>Puerto</mat-label>
            <input matInput type="number" [value]="connection.port" placeholder="8083/8084"/>
          </mat-form-field>

          <mat-form-field appearance="outline">
            <mat-label>Client ID</mat-label>
            <input matInput [value]="connection.clientId"/>
          </mat-form-field>
        </div>

        <div class="button-group">
          <button mat-raised-button color="primary" (click)="createConnection()">
            {{ isConnection ? 'Conectado' : 'Conectar' }}
          </button>
          <button mat-raised-button color="warn" (click)="destroyConnection()" *ngIf="isConnection">
            Desconectar
          </button>
        </div>
      </form>
    </mat-card-content>
  </mat-card>

  <!-- Sección de Suscripción y Publicación -->
  <div class="action-cards">
    <!-- Tarjeta de Suscripción -->
    <mat-card class="action-card">
      <mat-card-header>
        <mat-card-title>Subscribir</mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <form class="action-form">
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>Tópico</mat-label>
            <input matInput [(ngModel)]="subscription.topic" [ngModelOptions]="{standalone: true}"/>
          </mat-form-field>

          <mat-form-field appearance="outline">
            <mat-label>QoS</mat-label>
            <mat-select [(ngModel)]="subscription.qos" [ngModelOptions]="{standalone: true}">
              <mat-option *ngFor="let item of qosList" [value]="item.value">
                {{ item.label }}
              </mat-option>
            </mat-select>
          </mat-form-field>

          <div class="button-group">
            <button mat-raised-button color="primary" (click)="doSubscribe()">
              {{ subscribeSuccess ? 'Subscrito' : 'Subscribir' }}
            </button>
            <button mat-raised-button color="warn" (click)="doUnSubscribe()" *ngIf="subscribeSuccess">
              Cancelar
            </button>
          </div>
        </form>
      </mat-card-content>
    </mat-card>

    <!-- Tarjeta de Publicación -->
    <mat-card class="action-card">
      <mat-card-header>
        <mat-card-title>Publicar</mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <form class="action-form">
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>Tópico</mat-label>
            <input matInput [(ngModel)]="publish.topic" [ngModelOptions]="{standalone: true}"/>
          </mat-form-field>

          <mat-form-field appearance="outline" class="full-width">
            <mat-label>Mensaje</mat-label>
            <input matInput [(ngModel)]="publish.payload" [ngModelOptions]="{standalone: true}"/>
          </mat-form-field>

          <mat-form-field appearance="outline">
            <mat-label>QoS</mat-label>
            <mat-select [(ngModel)]="publish.qos" [ngModelOptions]="{standalone: true}">
              <mat-option *ngFor="let item of qosList" [value]="item.value">
                {{ item.label }}
              </mat-option>
            </mat-select>
          </mat-form-field>

          <div class="button-group">
            <button mat-raised-button color="accent" (click)="doPublish()" [disabled]="!isConnection">
              Publicar
            </button>
          </div>
        </form>
      </mat-card-content>
    </mat-card>
  </div>

  <!-- Tarjeta de Mensajes Recibidos -->
  <mat-card class="message-card">
    <mat-card-header>
      <mat-card-title>Mensajes Recibidos</mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <div class="message-container">
        <pre>{{ receiveNews }}</pre>
      </div>
      <button mat-button color="warn" (click)="receiveNews = ''" *ngIf="receiveNews">
        Limpiar
      </button>
    </mat-card-content>
  </mat-card>
</div>